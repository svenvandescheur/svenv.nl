/*! Svenv.nl 2015-05-18 */
function View(){"use strict";this.prettyprint_target=$("code"),this.getView=function(){return $("body").hasClass("categoryview")?"categoryview":$("body").hasClass("postview")?"postview":void 0},this.prettyPrint=function(){return this.prettyprint_target.addClass("prettyprint"),this}}function CategoryView(){"use strict";this.api_url="/api/",this.content_section=$("section#content"),this.fetch_button=$(".fetch_posts"),this.fetchPosts=function(a){var b=this;return $.ajax({url:b.api_url+"posts/?format=html&ordering=-date&page="+b.nextPage(),success:$.proxy(b._fetchPostsSuccess,b),error:$.proxy(b._fetchPostsError,b)}),this},this._fetchPostsSuccess=function(a){$(a).insertBefore(this.fetch_button).hide().fadeIn(),this.setPage(this.nextPage())},this._fetchPostsError=function(){this.fetch_button.text("No more posts.")},this.nextPage=function(){return this.getPage()+1},this.getPage=function(){return parseInt($("body").attr("data-page"),10)},this.setPage=function(a){return $("body").attr("data-page",a),this}}function PostView(){"use strict";this.disqus_shortname="svenv",this.disqus=function(){var a=document.createElement("script");return a.type="text/javascript",a.async=!0,a.src="//"+this.disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a),this}}function main(){"use strict";var a=new View,b=a.getView();if(a.prettyPrint(),"categoryview"===b){var c=new CategoryView;c.fetch_button.click(function(a){a.preventDefault(),c.fetchPosts()})}else if("postview"===b){var d=new PostView;d.disqus()}}$(document).ready(function(){"use strict";main()});